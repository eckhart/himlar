---
keystone::db::mysql::allowed_hosts:
  - "%{ipaddress_service1}"
  - 'localhost'
  - '%'

keystone::roles::admin::email: user@example.com
keystone::roles::admin::password: "%{hiera('keystone_admin_password')}"

keystone::service_name: "httpd"

keystone::endpoint::region:       "%{location}"
keystone::endpoint::public_url:   "%{hiera('endpoint_protocol')}://%{hiera('service__address__keystone_public')}:5000"
keystone::endpoint::internal_url: "http://%{hiera('service__address__keystone')}:5000"
keystone::endpoint::admin_url:    "http://%{hiera('service__address__keystone_admin')}:35357"
keystone::endpoint::version:      "v3"

keystone::wsgi::apache::ssl:      false

keystone::public_bind_host: "%{ipaddress_service1}"
keystone::admin_bind_host: "%{ipaddress_service1}"
keystone::database_connection: "mysql://keystone:%{%{hiera('keystone::db::mysql::password')}@%{%{hiera('service__address__mysql')}/keystone"

# Federation
keystone::federation::openidc::idp_name: 'dataporten'
keystone::federation::openidc::methods:
  - 'password'
  - 'token'
  - 'openidc'
keystone::federation::openidc::openidc_response_type: 'code'
keystone::federation::openidc::openidc_provider_metadata_url: 'https://auth.dataporten.no/.well-known/openid-configuration'
keystone::federation::openidc::openidc_client_id: '00000000-0000-0000-0000-000000000000'
keystone::federation::openidc::openidc_client_secret: '00000000-0000-0000-0000-000000000000'

# logging
keystone::use_syslog:    true
keystone::log_facility:  'LOG_LOCAL2'
